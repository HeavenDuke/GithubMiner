!function(){var e,t,r=0,n=new marked.Renderer;n.image=function(e,t,r){var n='<img class="md-image" style="max-width: 100%;" src="'+e+'" alt="'+r+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">"};var i=function(){var e={show:"hide",hide:"show"},t=$(this).children().text().replace(" README","");$(this).children().text(e[t]+" README"),$(this).prev().toggle("fast")},a=function(e){var t=function(e){var t="<li class='list-group-item'>";return t+="<a class='list-item-title' href='/repositories/"+e.full_name+"'>"+e.full_name+"</a>",t+="<a class='pull-right badge' style='background-color: #B0B0B0; margin-top: 5px;' onclick='$(this).children(\"form\").submit();'><form class='hidden' method='POST' action='/repositories/"+e.full_name+"/star'></form><i class='fa fa-star'></i> Star</a>",t+="<p class='list-item-description'>"+marked(e.description?e.description:"null",{renderer:n})+"</p>",t+="<p class='list-item-memo text-muted'><strong>Based on </strong>"+e.why+"</p>",e.language&&""!=e.language&&(t+="<span class='pull-right badge' style='background-color: "+e.color+";'>",t+="<a style='color: white;' href='/search?language='"+e.language+"> "+e.language+"</a>",t+="</span>"),t+="</li>"},i=function(){var e="<li class='list-group-item'>";return e+="No recommendation</li>"};if(0==e.length)if(0!=r)alert("No more recommendations.");else{$("#recommendation-container").children("li").remove(),$("#recommendation-container").addClass("empty-list"),$("#recommendation-container").addClass("text-center"),$("#recommendation-container").append($(i()));var a=$("#recommendation-refresher").parent();a.addClass("empty-list"),a.addClass("text-center"),a.append($(i())),$("#recommendation-refresher").remove()}else r+=e.length,$("#recommendation-container").children("li").remove(),e.forEach(function(e){$("#recommendation-container").append($(t(e))),0==$("#recommendation-refresher").prev().length?$("#recommendation-refresher").before($(t(e))):$("#recommendation-refresher").prev().after($(t(e)))})},o=function(e,n){$.get("/api/v1/recommendation/repository",{repository_id:e,offset:n,type:t},function(e,n){e.type&&(t=e.type),e.offset&&(r=e.offset),a(e.recommendations)})},c=function(){$(".refresher").click(function(){o(e,r)}),$("#recommendation-refresher").click(function(){o(e,r)})},s=function(){$(".readme").each(function(){$(this).html($(this).text())}),$("pre code").each(function(){hljs.highlightBlock(this)}),$("#readme-viewer").click(i),e=$("#rid").text();var t=$("#url").text();$("#rid").remove(),$("#url").remove(),$(".readme").find("a").each(function(){var e=$(this).attr("href");e&&(null!=e.match(/(^.\/)|(^..\/)(^.\\)|(^..\\)/)?e=t+e.replace(/($.\/)|($..\/)($.\\)|($..\\)/,"/"):null==e.match(/(^http:\\\\)|(^https:\/\/)|(#)/)&&(e=t+"/"+e)),$(this).attr("href",e)}),$(".readme").find("img").each(function(){var e=$(this).attr("src");e&&(null!=e.match(/(^.\/)|(^..\/)(^.\\)|(^..\\)/)?e=t+e.replace(/($.\/)|($..\/)($.\\)|($..\\)/,"/"):null==e.match(/(^http:\\\\)|(^https:\/\/)|(#)/)&&(e=t+"/"+e)),$(this).attr("src",e)}),c(),o(e,r),$()};$(document).ready(function(){null!=window.location.href.match(/repositories/)&&s()})}();