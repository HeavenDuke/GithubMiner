!function(){function e(){$(".medal-description").each(function(){$(this).children("p").html(marked($(this).children().text(),{renderer:a}))}),f(),u(),o(!0),$("#broadcast-event-refresher").length>0?(l("broadcast"),l("following")):l("")}var t,n=0,r=0,i=!0,a=new marked.Renderer;a.image=function(e,t,n){var r='<img class="md-image" style="max-width: 100%;" src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"};var s=function(e){var t=function(e){var t="<li class='list-group-item'>";return t+="<a class='list-item-title' href='/repositories/"+e.full_name+"'>"+e.full_name+"</a>",t+="<a class='pull-right badge' style='background-color: #B0B0B0; margin-top: 5px;' onclick='$(this).children('form').submit();'><form class='hidden' method='POST' action='/repositories/"+e.full_name+"/star'></form><i class='fa fa-star'></i> Star</a>",t+="<p class='list-item-description'>"+marked(e.description?e.description:"null",{renderer:a})+"</p>",t+="<p class='list-item-memo text-muted'><strong>Based on </strong>"+e.why+"</p>",e.language&&""!=e.language&&(t+="<span class='pull-right badge' style='background-color: "+e.color+";'>",t+="<a style='color: white;' href='/search?language='"+e.language+"> "+e.language+"</a>",t+="</span>"),t+="</li>"};0==e.length?alert("No more recommendations."):(i||(r+=e.length),$("#recommendation-container").children("li").remove(),e.forEach(function(e){$("#recommendation-container").append($(t(e))),0==$("#recommendation-refresher").prev().length?$("#recommendation-refresher").before($(t(e))):$("#recommendation-refresher").prev().after($(t(e)))}))},o=function(e){var n={offset:r};e&&(n.restart=!0),n.type=t,$.get("/api/v1/recommendation/guess",n,function(e,n){e.type&&(t=e.type),e.offset?(r=e.offset,i=!0):i=!1,s(e.recommendations)})},l=function(e){switch(e){case"following":$.get("/api/v1/events?type=following",{offset:n},function(e,t){c($("#following-event-container"),$("#following-event-refresher"),e.events)});break;case"broadcast":$.get("/api/v1/events",{offset:n},function(e,t){c($("#broadcast-event-container"),$("#broadcast-event-refresher"),e.events)});break;default:$.get("/api/v1/events",{offset:n},function(e,t){c($("#event-container"),$("#event-refresher"),e.events)})}},c=function(e,t,r){var i=function(e){var t="<li class='list-group-item event-item'>";return t+="<i class='fa fa-star'></i> "+e.login+" starred ",t+="<a href='/repositories/"+e.full_name+"'>"+e.full_name+"</a>",t+="<span class='text-muted pull-right'> "+e.created_at+"</span>",t+="</li>"};0==r.length?alert("No more event."):(n+=r.length,r.forEach(function(e){0==t.prev().length?t.before($(i(e))):t.prev().after($(i(e)))}))},f=function(){$(".refresher").click(function(){o(!1)}),$("#recommendation-refresher").click(function(){o(!1)})},u=function(){$("#event-refresher").click(function(){l(""),$(this).blur()}),$("#broadcast-event-refresher").click(function(){l("broadcast"),$(this).blur()}),$("#following-event-refresher").click(function(){l("following"),$(this).blur()}),$(".event-switcher").click(function(){$($(this).attr("target")).css("display","block"),$($(this).siblings().attr("target")).css("display","none"),$(this).removeClass("btn-default"),$(this).addClass("btn-inverse"),$(this).siblings().removeClass("btn-inverse"),$(this).siblings().addClass("btn-default"),$(this).blur()})};$(document).ready(function(){e()})}();